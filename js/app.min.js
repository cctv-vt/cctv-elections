var refresh_rate=2e4,api_endpoint="https://elections-api.cctv.org/api.php?f=results",url=new URLSearchParams(window.location.search),d=url.get("d"),e=url.get("e"),theme;if(!(theme=url.get("theme")))var theme="dull";console.log(d+e);var navOffset=document.getElementById("nav").offsetTop;window.onresize=function(){document.getElementById("election-coverage").style.height=navOffset+"px",document.getElementById("nav").classList.remove("static"),navOffset=document.getElementById("nav").offsetTop,navLock(document.getElementById("nav")),window.innerWidth>=1e3&&(document.getElementById("cmenu-items").style.height="auto")},window.onscroll=function(){navLock(document.getElementById("nav"))};const getSum=function(obj){var sum=0;for(i in obj)sum+=obj[i];return sum},navLock=function(target){window.pageYOffset>=navOffset?target.classList.add("static"):target.classList.remove("static")};var app=new Vue({el:"#app",data:{districts:[{title:"Loading",results:[{name:"loading...",votes:{loading:" votes..."}}]}],currentVue:0,dist:d,elec:e,theme:theme,settings:{dull:{img:"img/logo.svg",color:["#A76DA6","#FEE351","#D6647F","#79A8ED","#78E381"]},tmd19:{img:"img/newlogo.svg",color:["#FFB800","#AD00FF","#00E0FF","#FF003D","#00FF75"]}}},mounted(){this.getResults(),setInterval(function(){this.getResults()}.bind(this),refresh_rate),document.getElementById("election-coverage").style.height="600px"},methods:{getResults(){axios.get(api_endpoint).then(function(response){console.log("Receiving results from remote API endpoint."),app.districts=response.data.districts}).catch(function(error){console.log(error)})},sortVotes:arr=>arr.slice(0,12).sort(function(a,b){return app.getSum(b.votes)-app.getSum(a.votes)}),getSum(obj){var sum=0;for(i in obj)sum+=obj[i];return sum},getVotePerc(elec,votes){for(res of(electionTotal=0,elec.results))electionTotal+=this.getSum(res.votes);return votes/electionTotal*100},subResultsLength(obj){var len=0;for(d in obj)len+=1;return len},districtChange(k,ev){window.scrollY>navOffset&&window.scrollTo(0,navOffset),window.innerWidth<=1e3&&(ev.currentTarget.parentElement.style="0px"),this.currentVue=k,dChangeAnim.reverse()},subToggle(ev,v,eh){var sr=ev.lastChild,h=this.subResultsLength(v);"0px"!=sr.style.height&&sr.style.height?sr.style.height="0px":sr.style.height=h*eh+"px"},themeToggle(){}}});