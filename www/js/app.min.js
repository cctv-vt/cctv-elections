let refresh_rate=2e4,api_endpoint="https://elections-api.cctv.org/api.php?f=results",navOffset=document.getElementById("nav").offsetTop;window.onresize=(()=>{document.getElementById("nav").classList.remove("static"),navOffset=document.getElementById("nav").offsetTop,navLock(document.getElementById("nav")),window.innerWidth>=1e3&&"0px"==document.getElementById("cmenu-items").style.height&&(document.getElementById("cmenu-items").style.height="auto")}),window.onscroll=(()=>{navLock(document.getElementById("nav"))});const getSum=e=>{let t=0;for(i in e)t+=e[i];return t},navLock=e=>{window.pageYOffset>=navOffset?e.classList.add("static"):e.classList.remove("static")};var app=new Vue({el:"#app",data:{districts:[{title:"loading...",results:[{name:"loading...",votes:{loading:" votes..."}}]}],currentVue:0,color:["#FFB800","#AD00FF","#00E0FF","#00FF75","#FF003D"]},mounted(){this.getResults(),setInterval(function(){this.getResults()}.bind(this),refresh_rate)},methods:{getResults(){axios.get(api_endpoint).then(function(e){app.districts=e.data.districts}).catch(e=>{console.log(e)})},sortVotes:e=>e.slice(0,12).sort(function(e,t){return app.getSum(t.votes)-app.getSum(e.votes)}),getSum(e){let t=0;for(i in e)t+=e[i];return t},getVotePerc(e,t){for(res of(electionTotal=0,e.results))electionTotal+=this.getSum(res.votes);return t/electionTotal*100},districtChange(e,t){document.getElementById("election-results").style.opacity=0,window.scrollY>navOffset&&window.scrollTo(0,navOffset),window.innerWidth<=1e3&&(t.currentTarget.parentElement.style="0px"),this.currentVue=e,document.getElementById("election-results").style.opacity=1},subToggle(e){let t=e.lastChild;"0px"!=t.style.height&&t.style.height?t.style.height="0px":t.style.height="auto"}}});